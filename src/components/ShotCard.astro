---
interface Props {
  shot: {
    imageUrl: string;
    title: string;
    views: number;
    likes: number;
    user: {
      name: string;
      avatarUrl: string;
      isPro: boolean;
    };
  };
}

const { shot } = Astro.props;

function formatNumber(num: number) {
  if (num >= 1000) {
    return (num / 1000).toFixed(1) + 'k';
  }
  return num.toString();
}
---

<article class="group relative w-[314px]">
  <div class="relative overflow-hidden rounded-lg">
    <img 
      src={shot.imageUrl} 
      alt={shot.title}
      class="w-full h-[234px] object-cover"
      loading="lazy"
    />
    <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-all duration-300">
      <div class="absolute bottom-4 right-4 flex gap-2">
        <button class="w-8 h-8 rounded-full bg-white flex items-center justify-center hover:bg-gray-100 transition-colors">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z" fill="currentColor"/>
          </svg>
        </button>
        <button class="w-8 h-8 rounded-full bg-white flex items-center justify-center hover:bg-gray-100 transition-colors">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Shot Title -->
  <h3 class="mt-3 text-[15px] font-medium text-gray-900 truncate">{shot.title}</h3>

  <!-- Shot Info -->
  <div class="flex items-center mt-2">
    <img 
      src={shot.user.avatarUrl} 
      alt={shot.user.name}
      class="w-6 h-6 rounded-full"
      loading="lazy"
    />
    <div class="ml-2 flex-1">
      <div class="flex items-center">
        <span class="text-[13px] text-gray-700 font-medium">{shot.user.name}</span>
        {shot.user.isPro && (
          <span class="ml-1 text-[10px] bg-[#ea4c89] text-white px-1.5 leading-[14px] rounded-full">TEAM</span>
        )}
      </div>
    </div>
    <div class="flex items-center gap-2 text-[#9e9ea7]">
      <div class="flex items-center gap-1">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor"/>
        </svg>
        <span class="text-xs">{formatNumber(shot.likes)}</span>
      </div>
      <div class="flex items-center gap-1">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 6.5a9.77 9.77 0 0 1 8.82 5.5A9.77 9.77 0 0 1 12 17.5 9.77 9.77 0 0 1 3.18 12 9.77 9.77 0 0 1 12 6.5zm0-2C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zm0 5a2.5 2.5 0 0 1 0 5 2.5 2.5 0 0 1 0-5zm0-2c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5 4.5-2.02 4.5-4.5-2.02-4.5-4.5-4.5z" fill="currentColor"/>
        </svg>
        <span class="text-xs">{formatNumber(shot.views)}</span>
      </div>
    </div>
  </div>
</article> 